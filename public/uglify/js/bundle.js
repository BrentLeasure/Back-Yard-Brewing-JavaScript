"use strict";var xhr=new XMLHttpRequest,GetRequest=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2];void 0!=t?xhr.open("GET",e+t):xhr.open("GET",e),xhr.send(null),xhr.onload=function(){return 200==xhr.status?n(200,JSON.parse(xhr.responseText)):n(400,JSON.parse(xhr.responseText))}},PostRequest=function(e,t,n){var o=arguments.length<=3||void 0===arguments[3]?void 0:arguments[3];t=JSON.stringify(t),xhr.open("POST",e),xhr.setRequestHeader("Content-Type",n),xhr.send(t),xhr.onload=function(){if(200==xhr.status)return o(200,xhr);var e=JSON.parse(xhr.responseText);return o(400,e)}},festivalMap,lastMarker,marker=[],InitMap=function(){festivalMap=new google.maps.Map(document.getElementById("festivals-map"),{center:{lat:39.244785,lng:-105.511852},zoom:8})},FestivalsReady=function(){GetRequest("/getFestivals",void 0,function(e,t){if(200==e)for(var n=t.events,o=document.getElementById("festivals"),a=0;a<n.length;a++){var i=document.createElement("li"),l=document.createElement("h1"),s=document.createElement("p");l.textContent=n[a].title,s.textContent=n[a].location,i.appendChild(l),i.appendChild(s),"N/A"!=n[a].location&&(marker.push(CreateMarker(n[a])),i.setAttribute("value",n[a]._id),i.setAttribute("onmouseover","OpenInfoWindow(this.getAttribute('value'))")),o.appendChild(i)}})},OpenInfoWindow=function(e){for(var t=0;t<marker.length;t++)if(e==marker[t]._id){google.maps.event.trigger(marker[t],"click");break}},CreateMarker=function(e){var t=new google.maps.Marker({map:festivalMap,position:new google.maps.LatLng(e.latitude,e.longitude)});t._id=e._id;var n="<h3>"+e.title+"</h3><p> <strong>Date:</strong> "+e.date+"</p> <p><strong>Location:</strong> "+e.location+"</p><a target='_blank' href = '"+e.url+"'> More Info </a>";return t.infoWindow=new google.maps.InfoWindow({content:n}),google.maps.event.addListener(t,"click",function(){lastMarker&&lastMarker.infoWindow.close(),lastMarker=t,t.infoWindow.open(festivalMap,t)}),t},HomeReady=function(){document.getElementById("logout").style.display="none"},Login=function(){var e={email:null,password:null};e.email=document.getElementById("email").value,e.password=document.getElementById("password").value,PostRequest("/auth/login",e,"application/json",function(e,t){200==e&&(t=JSON.parse(t.responseText),window.open("/user/"+t.username,"_parent"))})};document.getElementById("navigation-bar").innerHTML="<ul><li><button onclick='Home();' id='home-link'>Home</button></li><li><a id='recipes-link' href='/recipes'>Recipes</a></li><li><a id='festivals-link' href='/festivals'>Festivals</a></li><li><a href='/auth/logout' id='logout'>Logout</a></li></ul>";var Home=function(){GetRequest("/api/me",void 0,function(e,t){200==e?(window.open("/user/"+t.username,"_parent"),document.getElementById("logout").style.display="inline-block"):window.open("/","_parent")})};document.addEventListener("DOMContentLoaded",function(e){GetRequest("/recipes/getallbeertypes",void 0,function(e,t){if(200===e){var n=document.getElementById("beer-type-selection"),o=document.createElement("option");o.innerHTML="-- Select One --",o.value=null,n.appendChild(o);for(var a=0;a<t.length;a++){var i=document.createElement("option");i.innerHTML=t[a].alias,i.value=t[a].alias,n.appendChild(i)}}})});var SubmitRecipe=function(){var e={alias:null,description:null,category:null,instructions:null};e.alias=document.getElementById("alias").value,e.description=document.getElementById("description").value,e.category=document.getElementById("beer-type-selection").value,e.instructions=document.getElementById("instructions").value,postRequest("/createrecipe",e,"application/json",function(e,t){400===e?(document.getElementsByClassName("message")[0].style.color="red",document.getElementsByClassName("message")[0].innerHTML=t.message):(document.getElementsByClassName("message")[0].style.color="green",document.getElementsByClassName("message")[0].innerHTML="success!")})},beerList=[],search="",RecipesReady=function(){GetRequest("getallbeertypes",void 0,function(e,t){if(200==e){beerList=t;for(var n=document.getElementById("beers"),o=document.createDocumentFragment(),a=0;a<t.length;a++){var i=document.createElement("li"),l=document.createElement("BUTTON");i.textContent=t[a].alias,l.appendChild(i),l.setAttribute("value",a),l.setAttribute("name",t[a].alias),l.setAttribute("onclick","MoreInfo(this.getAttribute('value'))"),l.className="beer-buttons",o.appendChild(l)}n.appendChild(o)}else console.log(t.message)})},MoreInfo=function(e){GetRequest("/beer/",beerList[e].alias,function(t,n){if(200==t){document.getElementById("user-recipes").innerHTML="";var o=document.getElementById("user-recipes"),a=document.createDocumentFragment(),i=n;document.getElementById("title").textContent=beerList[e].alias,document.getElementById("about").textContent=beerList[e].about,document.getElementById("abv").textContent=beerList[e].abv;for(var l=0;l<i.length;l++){var s=document.createElement("button"),r=document.createElement("li");r.textContent=i[l].alias,s.appendChild(r),s.className="recipe-buttons",a.appendChild(s)}o.appendChild(a),document.getElementById("beer-list").style.display="none",document.getElementById("recipes").style.display="block"}})},CloseBeerWindow=function(){document.getElementById("beer-list").style.display="inline-block",document.getElementById("recipes").style.display="none"},SearchBeerList=function(e){if(""!=e)for(var t=0;t<beerList.length;t++){var n=beerList[t].alias.toLowerCase(),o=e.toLowerCase();n.includes(o)?"none"==document.getElementById("beers").children[t].style.display&&(document.getElementById("beers").children[t].style.display="inline-block"):document.getElementById("beers").children[t].style.display="none"}else if(""==e)for(var a=0;a<beerList.length;a++)document.getElementById("beers").children[a].style.display="inline-block"},user={};document.addEventListener("DOMContentLoaded",function(e){GetRequest("/api/me",void 0,function(e,t){200===e&&(user=t,document.getElementById("username").innerHTML="Welcome back, "+user.username)})});