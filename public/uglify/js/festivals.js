"use strict";function InitMap(){festivalMap=new google.maps.Map(document.getElementById("festivals-map"),{zoom:8})}function FestivalsLoad(){GetRequest("/getFestivals",void 0,function(e,t){if(200==e)for(var n=JSON.parse(t),o=n.events,a=document.getElementById("festivals"),i=0;i<o.length;i++){var r=document.createElement("div"),l=document.createElement("li"),s=document.createElement("h1"),d=document.createElement("p");s.textContent=o[i].title,d.textContent=o[i].location,l.appendChild(s),l.appendChild(d),r.appendChild(l),"N/A"!=o[i].location&&(marker.push(CreateMarker(o[i])),r.setAttribute("value",o[i]._id),r.setAttribute("id",i),r.setAttribute("onmouseover","OpenInfoWindow( this.getAttribute( 'value' ), this.getAttribute( 'id' ) )")),a.appendChild(r)}}),document.getElementById("festivals-content").style.display="block",google.maps.event.trigger(festivalMap,"resize"),festivalMap.setCenter(new google.maps.LatLng(39.244785,(-105.511852)))}function OpenInfoWindow(e,t){null!=previousID&&(document.getElementById(previousID).style.color="#000000"),previousID=t,document.getElementById(t).style.color="#872d2e";for(var n=0;n<marker.length;n++)if(e==marker[n]._id){google.maps.event.trigger(marker[n],"click");break}}function CreateMarker(e){var t=new google.maps.Marker({map:festivalMap,position:new google.maps.LatLng(e.latitude,e.longitude)});t._id=e._id;var n="<h3>"+e.title+"</h3><p> <strong>Date:</strong> "+e.date+"</p> <p><strong>Location:</strong> "+e.location+"</p><a target='_blank' href = '"+e.url+"'> More Info </a>";return t.infoWindow=new google.maps.InfoWindow({content:n}),google.maps.event.addListener(t,"click",function(){lastMarker&&lastMarker.infoWindow.close(),lastMarker=t,t.infoWindow.open(festivalMap,t)}),t}var festivalMap,lastMarker,marker=[],previousID;document.getElementById("festivals-content").style.display="none",window.onload=function(){FestivalsLoad(),IsLoggedIn()};